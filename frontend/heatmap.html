<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  <title>Utilization Heatmap &ndash; Endolla Watcher</title>
  <link
    rel="icon"
    type="image/svg+xml"
    href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%2300418a'/%3E%3Cpath d='M20 20h24v24H20z' fill='%23f7c948'/%3E%3Ccircle cx='32' cy='32' r='10' fill='%23ffffff' opacity='.85'/%3E%3C/svg%3E'
  >
  <link rel="stylesheet" href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css" crossorigin="">
  <link rel="stylesheet" href="2025.css?v=20250101">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <nav class="navbar u-glass" aria-label="Primary">
        <div class="navbar__brand">
          <span class="navbar__title">Endolla Watcher</span>
        </div>
        <div class="navbar__spacer"></div>
        <div class="navbar__links">
          <a href="index.html" class="navbar__link">Dashboard</a>
          <a href="heatmap.html" class="navbar__link" aria-current="page">Heatmap</a>
          <a href="locations.html" class="navbar__link">Locations</a>
          <a href="problematic.html" class="navbar__link">Problematic</a>
          <a href="about.html" class="navbar__link">About</a>
        </div>
      </nav>
    </div>
  </header>
  <main class="page-main">
    <div class="container">
      <section class="section heatmap-overview" id="heatmap-view">
        <div class="section-header">
          <div class="section-title">
            <h2>Utilization Heatmap</h2>
            <p class="muted">Visualise where Endolla ports are busiest across Barcelona.</p>
          </div>
          <div class="heatmap-controls">
            <label class="heatmap-select" for="heatmap-metric">
              Metric
              <select id="heatmap-metric">
                <option value="occupation_utilization_pct">Occupied time</option>
                <option value="active_charging_utilization_pct">Active charging</option>
              </select>
            </label>
          </div>
        </div>
        <p class="muted" id="heatmap-description"></p>
        <div class="heatmap-legend" aria-hidden="true">
          <span id="heatmap-legend-min">0%</span>
          <div class="heatmap-gradient" role="presentation"></div>
          <span id="heatmap-legend-max">100%</span>
        </div>
        <p class="muted" id="heatmap-status">Loading utilization heatmap…</p>
        <div id="utilization-heatmap" class="heatmap-map" role="presentation"></div>
        <p class="muted" id="heatmap-note"></p>
      </section>

      <section class="section heatmap-hotspots">
        <div class="section-header">
          <div class="section-title">
            <h3>Location hotspots</h3>
            <p class="muted" id="heatmap-updated">Loading utilization hotspots…</p>
          </div>
        </div>
        <div id="heatmap-location-list" class="heatmap-table-container" aria-live="polite"></div>
      </section>
    </div>
  </main>
  <footer class="site-footer">
    <div class="container">
      <small>&copy; <span id="year"></span> Endolla Watcher</small>
      <small id="last-updated"></small>
    </div>
  </footer>
  <script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js" crossorigin=""></script>
  <script src="config.js"></script>
  <script type="module" src="app.js"></script>
</body>
</html>
